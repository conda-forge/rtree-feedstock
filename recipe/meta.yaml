{% set name = "rtree" %}
{% set version = "1.4.0" %}

package:
  name: {{ name|lower }}
  version: {{ version }}

source:
  url: https://pypi.org/packages/source/{{ name[0] }}/{{ name }}/rtree-{{ version }}.tar.gz
  sha256: 9d97c7c5dcf25f6c0599c76d9933368c6a8d7238f2c1d00e76f1a69369ca82a0

build:
  # noarch: python  # keep this commented-out until upstream changes are made to create pure-python wheel for conda-forge
  script: {{ PYTHON }} -m pip install . -vv --no-deps --no-build-isolation
  number: 1

requirements:
  build:
    - python                                 # [build_platform != target_platform]
    - cross-python_{{ target_platform }}     # [build_platform != target_platform]
  host:
    - python
    - setuptools >=61
    - wheel
    - pip
    - libspatialindex
  run:
    - python
    - libspatialindex

test:
  imports:
    - rtree
  commands:
    - pip check
  requires:
    - python
    - pip
    - pytest
    - numpy
  source_files:
    - tests/

about:
  summary: R-Tree spatial index for Python GIS
  home: https://github.com/Toblerity/rtree
  license: MIT
  license_file: LICENSE.txt

extra:
  recipe-maintainers:
    - ocefpaf
    - hobu
    - mwtoews
